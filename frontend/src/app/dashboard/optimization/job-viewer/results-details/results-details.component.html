<div id="resultsDetailsComponent" *ngIf="optimizationResult$ | async as opt">
  <h1 class="mat-h1">{{ opt.goal }}{{ opt.shorting_ok ? ' (Long/Short)' : '' }} Portfolio Details</h1>

  <div class="row">
    <div class="col-lg-6 col-md-12 mb-30" *ngIf="weightsChart$ | async as weightsChart">
      <mat-card class="full-height">
        <mat-card-header>
          <mat-card-title>Asset Weights</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div [chart]="weightsChart"></div>
          <div class="overflowX text-center">
            <table class="gridTable marginAuto">
              <thead>
                <tr>
                  <th *ngFor="let ticker of portfolio.parameters.tickers" class="text-left">{{ ticker }}</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td *ngFor="let weight of opt.weights">{{ (weight * 100).toFixed(2) }}%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-lg-6 col-md-12 mb-30" *ngIf="opt.description">
      <mat-card class="full-height">
        <mat-card-header>
          <mat-card-title>Strategy Details</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ opt.description }}</p>
          <h2 class="mat-h2">{{ portfolio.parameters.interval | titlecase }} Performance</h2>
          <div class="performance mb-10">
            <table>
              <tbody>
                <tr>
                  <th class="text-right">Average Returns:&nbsp;</th>
                  <td>{{ (opt.returns * 100).toFixed(4) }}%</td>
                </tr>
                <tr>
                  <th class="text-right">Standard Deviation:&nbsp;</th>
                  <td>{{ opt.std_dev.toFixed(4) }}</td>
                </tr>
                <tr>
                  <th class="text-right">Sharpe Ratio:&nbsp;</th>
                  <td>{{ opt.sharpe_ratio.toFixed(4) }}</td>
                </tr>
                <tr>
                  <th class="text-right">Total Return:&nbsp;</th>
                  <td>{{ (opt.portfolio_returns.total_return * 100).toFixed(2) }}%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </mat-card-content>
      </mat-card>
    </div>    
  </div>

  <div class="row mb-30" *ngIf="comparisonChart$ | async as comparisonChart">
    <div class="col-12">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Portfolio Returns vs. Benchmark Indices</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div [chart]="comparisonChart"></div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <div class="row mb-30" *ngIf="volatilityChart$ | async as volatilityChart">
    <div class="col-12">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Portfolio Returns Volatility</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div [chart]="volatilityChart"></div>
          <div class="mt-3 text-muted">
            <small>A Bollinger BandÂ® is a technical analysis tool defined by a set of lines
              plotted two standard deviations (positively and negatively) away from a simple moving average (SMA) of the
              security's price.</small>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

</div>
